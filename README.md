# vtikh_infra
vtikh Infra repository

## ДЗ 03

В разделе приводятся действия, необходимые для подтверждения выполнения домашнего задания №3.

### bastion host - стандартное задание

Для подключения к ВМ без публичного адреса, находящейся за бастион-хостом, необходимо:

1. Добавить в файл `~/.ssh/config` следующие строки:
```
Host <internal-VM-ip>
  ProxyCommand ssh <username>@<bastion_white_ip> -W %h:%p
```
где:
*internal-VM-ip* - локальный адрес целевой ВМ,  
*username* - имя пользователя на бастион-хосте,  
*bastion_white_ip* - внешний адрес бастион-хоста.

2. подключиться к целевой машине в одну команду `ssh <user>@<internal-VM-ip>`,
где *user* - имя пользователя целевой машины.

### bastion host - дополнительное задание

Для того, чтобы было возможно подключаться, указывая клиенту ssh только имя хоста целевой машины (в примере примем имя *someinternalhost*), находящейся за бастион-хостом, необходимо:

1. отредактировать файл `/etc/hosts` (или `c:\windows\system32\etc\hosts` для ОС семейства Windows). Для этого потребуются права суперпользвателя. Добавить строку:
``` <internal-VM-ip> someinternalhost```
2.  Созданную ранее секцию в файле `~/.ssh/config` привести к виду:
```
Hosts someinternalhost
  User <user>
  ProxyCommand ssh <username>@<bastion_white_ip> -W %h:%p
```
здесь *user* - имя пользователя на целевой ВМ, остальные условные обозначения описаны выше.

3. Теперь возможно подключение по команде `ssh someinternalhost`
